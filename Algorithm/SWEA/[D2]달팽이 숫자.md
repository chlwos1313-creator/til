# [D4] 여우 줄이기

## 1. 문제 개요
- **문제:** 달팽이는 1부터 N*N까지의 숫자가 시계방향으로 이루어져 있다.
다음과 같이 정수 N을 입력 받아 N크기의 달팽이를 출력하시오.
- **입력:**
    가장 첫 줄에는 테스트 케이스의 개수 T가 주어지고, 그 아래로 각 테스트 케이스가 주어진다.

    각 테스트 케이스에는 N이 주어진다.
- **출력:** 각 줄은 '#t'로 시작하고, 다음 줄부터 빈칸을 사이에 두고 달팽이 숫자를 출력한다.
(t는 테스트 케이스의 번호를 의미하며 1부터 시작한다.)

## 유형
- **알고리즘:** 시뮬레이션 (Simulation), 구현 (Implementation)
- **자료구조:** 2차원 배열 (Matrix)

## 접근 방법 (Why Direction Vector?)
- **문제 상황:** - 숫자가 1부터 $N^2$까지 시계 방향으로 소용돌이치며 채워져야 함.
  - 배열의 경계(벽)에 부딪히거나, 이미 숫자가 채워진 칸을 만나면 **오른쪽으로 90도 회전**해야 함.
- **해결책:**
  - **방향 벡터(`dr`, `dc`)**를 미리 정의하여 이동을 제어함.
  - 현재 위치에서 다음 위치를 미리 계산해보고, 갈 수 없는 곳이라면 방향 인덱스(`d`)를 증가시켜 방향을 전환함.
  - 방향은 `우 -> 하 -> 좌 -> 상` 4가지가 반복되므로 **나머지 연산(`% 4`)**을 활용함.



## 핵심 문법 및 로직 정리

### 2차원 리스트 초기화 (List Comprehension)
- `matrix = [[0] * N for _ in range(N)]`
- $N \times N$ 크기의 빈 도화지를 생성함. `[[0]*N]*N`과 같은 방식은 모든 행이 같은 주소를 참조하는 **얕은 복사** 문제가 발생하므로 반드시 위 형식을 사용해야 함.

### 방향 벡터 설계
- 시계 방향(`우-하-좌-상`) 순서로 좌표 변화량을 설정:
  - `dr = [0, 1, 0, -1]` (행 이동)
  - `dc = [1, 0, -1, 0]` (열 이동)

### 조건부 방향 전환
- `if`문을 통해 다음 좌표(`nr, nc`)가 유효한지 검사:
  1. `0 <= nr < N and 0 <= nc < N`: 인덱스가 배열 범위를 벗어나지 않는가?
  2. `matrix[nr][nc] == 0`: 아직 숫자가 채워지지 않은 빈 칸인가?
- 위 조건을 만족하지 못하면 `d = (d + 1) % 4`를 통해 방향을 바꿈.

### 리스트 언패킹 (Unpacking)
- `print(*row)`
- 리스트 내부의 요소를 대괄호 없이 공백으로 구분하여 출력함. (예: `[1, 2, 3]` -> `1 2 3`)

---
## 4. 최종 코드 (Python)
```python
T = int(input())

# 방향: 우, 하, 좌, 상
dr = [0, 1, 0, -1]
dc = [1, 0, -1, 0]

for tc in range(1, T + 1):
    N = int(input())
    matrix = [[0] * N for _ in range(N)]
    
    r, c = 0, 0
    dist = 0  # 현재 방향 인덱스 (0:우, 1:하, 2:좌, 3:상)
    
    for i in range(1, N**2 + 1):
        matrix[r][c] = i
        
        # 다음 이동할 위치 계산
        nr = r + dr[dist]
        nc = c + dc[dist]
        
        # 범위를 벗어나거나 이미 숫자가 채워져 있다면 방향 전환
        if nr < 0 or nr >= N or nc < 0 or nc >= N or matrix[nr][nc] != 0:
            dist = (dist + 1) % 4
            nr = r + dr[dist]
            nc = c + dc[dist]
            
        r, c = nr, nc

    print(f'#{tc}')
    for row in matrix:
        print(*row)
```